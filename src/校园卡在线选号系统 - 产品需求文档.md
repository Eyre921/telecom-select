**版本 V-Final-Simplified**

### 1. 项目概述

#### 1.1. 项目背景

当前，中国电信校园卡暑期前置营销流程依赖于手动操作：客户在静态在线文档中查找未被预定的号码，然后联系营销人员，通过微信支付完成预定，最后营销人员手动更新表格。整个过程效率低下，易于出错，且客户体验不佳。为了优化流程、提升效率和客户满意度，我们计划开发一个集号码展示、在线选择、订单管理于一体的在线选号系统。

#### 1.2. 产品目标

- **提升客户体验：** 为客户提供一个直观、便捷、自助的在线选号和预定平台。
    
- **提高营销效率：** 自动化处理订单信息，减少营销人员手动操作，使其能专注于核心营销工作。
    
- **加强数据管理：** 集中管理号码库存、订单信息和物流状态，确保数据实时、准确，为管理员提供全面的数据洞察。
    
- **规范业务流程：** 建立标准化的线上营销流程，并支持对历史数据的平滑迁移与整合。
    

#### 1.3. 目标用户

- **客户 (C端用户):** 主要是寻求办理校园卡的学生群体。
    
- **营销人员 (B端用户):** 负责跟进客户订单、确认收款和提供客户支持。
    
- **管理员 (B端用户):** 负责整个系统的号码管理、订单监控和数据维护。
    

### 2. 用户角色与权限

系统包含三个核心角色，各自拥有不同的操作权限。

|角色|核心职责|权限说明|
|---|---|---|
|**客户**|在线浏览、选择号码并提交预定信息。|- 无需登录。<br>- 浏览所有“未预定”状态的号码。<br>- 可切换“一键屏蔽已选号码”开关。<br>- 点选号码，选择支付方式（20元定金/200元全款）。<br>- 填写并提交个人信息（姓名、联系电话、收货地址等）。|
|**营销人员**|处理和跟进客户订单，**审核新订单**。|- 需要账号密码登录。<br>- 查看所有订单的详细信息，**特别是“待审核”列表**。<br>- **可以修改**除“号码”本身之外的所有字段。<br>- **可以将订单状态从“审核中”修改为“已预定”**。<br>- **可以手动释放**超时的待审核订单。|
|**管理员**|系统的最高权限拥有者，负责全部数据和系统的维护。|- 需要账号密码登录。<br>- 拥有**所有权限**，包括审核、查看、修改、添加、删除所有的号码和订单信息。<br>- **可以批量导入**新号码（系统自动分析是否靓号）。<br>- **拥有强大的批量数据导入与合并更新功能**。|

### 3. 产品功能详述

#### 3.1. 客户端功能 (C-Side)

**3.1.1. 号码展示页**

- **界面布局：** 采用网格（Grid）布局清晰地展示号码列表，适配PC和移动端。
    
- **号码状态标识：**
    
    - **可选号码：** 正常显示，可点击。
        
    - **靓号：** 特殊样式高亮（如红色边框、皇冠图标），并可标注靓号原因。
        
    - **审核中/已预定：** 号码置灰，添加“已被锁定”蒙层或标签，不可点击。
        
- **核心功能：**
    
    - **“一键屏蔽已选号码”开关：** 开启后，所有“审核中”和“已预定”的号码将从列表中隐藏。
        
    - **一键复制号码 (体验优化):** 每个号码卡片上提供一个复制按钮（可默认隐藏，鼠标悬浮时显示），方便客户复制号码。
        

**3.1.2. 选号与下单流程**

1. **选择号码：** 客户点击心仪的、状态为“可选”的号码。
    
2. **弹出下单窗口 (Modal)：** 显示所选号码，提供交单方式选择。
    
3. **填写信息表单：** 根据所选交单方式，填写姓名、电话、地址等信息。
    
4. **提交订单与支付：**
    
    - 客户点击“提交”按钮，系统记录客户信息，并将号码状态更新为**“审核中”**。
        
    - 页面上直接展示对应金额的收款二维码。
        
    - 页面附上明确提示文字，如：“恭喜您！号码 `18812341234` **已为您临时锁定30分钟**。请立即截图保存并扫码支付。**支付成功后，请务必将支付凭证截图发送给您的销售人员**，以便我们为您确认订单。若超时未确认，号码可能会被释放。”
        

**3.1.3. 智能搜索与筛选 (体验优化)**

- 在号码列表上方增加一个搜索栏。
    
- **搜索功能：** 允许客户输入数字进行模糊搜索。
    
- **筛选功能：** 提供下拉菜单或标签，允许客户按靓号类型进行快速筛选。
    

#### 3.2. 管理后台功能 (B-Side)

**3.2.1. 登录**

- 为“营销人员”和“管理员”提供独立的登录入口。
    

**3.2.2. 订单/号码管理仪表盘**

- **核心视图：**
    
    - **数据统计面板 (体验优化):** 页面顶部展示核心数据卡片，如：`总号码数`、`剩余可选`、`今日新增订单`、`待审核订单数`。
        
    - **“待审核订单”模块：**
        
        - **高亮与倒计时 (体验优化):** 每条待审核订单用不同颜色背景高亮，并显示一个“已下单XX分钟”的计时器，提醒操作员紧急程度。
            
        - **超时订单筛选/排序：** 提供一个按钮或标签，可以一键筛选出所有下单超过30分钟的订单。
            
    - **主数据表格：** 一个功能强大的数据表格，展示所有号码及其关联信息。
        
- **核心功能：**
    
    - **审核操作：** 在“待审核”列表或主表格中，可将`预定状态`从“审核中”修改为“已预定”。
        
    - **手动释放超时订单 (核心功能):**
        
        - **批量释放：** 在“待审核”列表上方，提供一个**“一键释放所有超时订单”**的按钮。点击后，系统会清空所有下单超过30分钟的订单信息，并将其号码状态恢复为“未预定”。
            
        - **单个释放：** 在每个待审核订单的操作列中，提供一个“手动释放”按钮。
            
    - **行内编辑 (Inline-Editing)：** 快速修改各个字段。
        

**3.2.3. 批量数据导入与更新 (仅管理员)**

- **功能入口：** 后台提供一个专门的“批量导入/更新数据”页面。
    
- **界面：** 一个大的文本输入框，用于粘贴Excel数据。
    
- **核心处理逻辑：** 系统自动识别数据格式，以“号码”为唯一键，进行新增或合并更新（以新数据为准，空值不覆盖）。
    
- **字段映射规则：**
    

|旧表格字段|对应系统数据库字段|
|---|---|
|`号码` / `新选号码`|`phone_number`|
|`卡板状态`|`delivery_status`|
|`收款金额`|`payment_amount`|
|`客户姓名`|`customer_name`|
|`工作人员`|`assigned_marketer`|
|`联系号码`|`customer_contact`|
|`邮寄地址`|`shipping_address`|
|`快递单号`|`ems_tracking_number`|

### 4. 关键工作流与数据模型

#### 4.1. 订单审核与资源释放工作流

1. **锁定：** 客户提交订单，`reservation_status` 变为 `审核中`，`order_timestamp` 被记录。
    
2. **审核：** 营销人员/管理员在后台监控“待审核”订单。收到客户支付凭证后，找到对应订单，补充支付信息，并将 `reservation_status` 修改为 `已预定`。
    
3. **手动释放（核心后台逻辑）：**
    
    - 系统在后台管理页面**高亮显示**所有下单时间超过30分钟的“审核中”订单。
        
    - 营销人员/管理员可以根据实际情况，通过点击**“单个释放”**或**“一键释放所有超时订单”**按钮来执行释放操作。
        
    - 执行释放操作后，系统将清空该订单的客户相关信息，并将 `reservation_status` 重置为 `未预定`。
        

#### 4.2. 数据模型 (数据库表结构)

建议使用一张核心表 `phone_numbers` 来存储所有信息。

|字段名 (Field Name)|数据类型 (Data Type)|描述|备注|
|---|---|---|---|
|`id`|INT, AUTO_INCREMENT|唯一标识符|主键|
|`phone_number`|VARCHAR(11)|手机号码|唯一索引|
|`is_premium`|BOOLEAN|是否为靓号|**由系统在添加时自动判断**|
|`premium_reason`|VARCHAR(50)|靓号原因|**由系统在添加时自动填充**|
|`reservation_status`|ENUM|预定状态|**'未预定', '审核中', '已预定'**|
|`order_timestamp`|DATETIME|下单时间|**用于计算30分钟超时**|
|`payment_amount`|DECIMAL(10, 2)|收款金额|20.00, 200.00, 或 NULL|
|`payment_method`|ENUM|支付方式|'微信', '支付宝', '现金', '其它', NULL|
|`transaction_id`|VARCHAR(100)|交易订单号|可为空|
|`assigned_marketer`|VARCHAR(50)|负责的营销人员||
|`customer_name`|VARCHAR(50)|客户姓名||
|`customer_contact`|VARCHAR(20)|客户联系方式||
|`shipping_address`|VARCHAR(255)|客户收货地址||
|`ems_tracking_number`|VARCHAR(50)|EMS单号||
|`delivery_status`|ENUM|号码状态/物流状态|'空', '在途未激活', '在途已激活', '已收到未激活'|
|`created_at`|TIMESTAMP|记录创建时间||
|`updated_at`|TIMESTAMP|记录最后更新时间||

### 5. 非功能性需求

- **性能：** 系统响应迅速，即使号码数量上万，客户列表页加载时间也应在2秒以内。
    
- **易用性：** 界面简洁直观，无需培训即可上手操作。特别是后台的“待审核”列表和手动释放功能要一目了然。
    
- **响应式设计：** 客户前端必须完美适配手机、平板和桌面浏览器。管理后台优先适配桌面端，但关键功能在移动端也应可用。
    
- **安全性：** 后台需进行身份验证和权限控制，防止未授权访问和操作。所有用户输入都应进行安全过滤，防止XSS、SQL注入等攻击。
    
- **可扩展性：** 系统架构应具备良好的扩展性，便于未来增加新功能。
    

### 6. 后续版本规划 (Out of Scope for V1.0)

- **V1.1:**
    
    - 后台增加简单的数据统计图表（如每日订单量、营销人员业绩统计、靓号预定比例等）。
        
    - 增加操作日志，记录关键操作（如订单审核、数据导入、手动释放），方便追溯。
        
- **V2.0:**
    
    - 集成微信/支付宝原生支付接口，实现支付状态自动确认。
        
    - 增加订单状态变更的短信/微信通知功能，自动通知客户审核结果、发货状态等。